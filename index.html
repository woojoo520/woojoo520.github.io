<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="a study blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Celery Fairy">
<meta property="og:url" content="https://woojoo520.github.io/index.html">
<meta property="og:site_name" content="Celery Fairy">
<meta property="og:description" content="a study blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Celery Fairy">
<meta name="twitter:description" content="a study blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://woojoo520.github.io/">





  <title>Celery Fairy</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <a href="https://github.com/woojoo520" class="github-corner" aria-label="View source on GitHub">
      <svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/>
      </svg>
    </a>
    <style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Celery Fairy</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Celery's Blog</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://woojoo520.github.io/2019/11/25/PCA原理详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mariana">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Celery Fairy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/25/PCA原理详解/" itemprop="url">PCA原理详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-25T17:09:29+08:00">
                2019-11-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="PCA原理详解"><a href="#PCA原理详解" class="headerlink" title="PCA原理详解"></a>PCA原理详解</h2><p>虽然之前看过PCA，但说实话不是特别理解，今天在人工智能的课堂上再次学了一下，感觉还是有点收获的。就随便写写吧</p>
<h3 id="What-is-PCA？"><a href="#What-is-PCA？" class="headerlink" title="What is PCA？"></a>What is PCA？</h3><p>PCA（Principle Component Analysis）是一种常用的<strong>数据分析方法</strong></p>
<p>PCA通过线性变换<strong>将原始数据变换为一组各维度线性无关的表示</strong>，可用于<strong>提取数据的主要特征分量</strong>，常用于高维数据的<strong>降维</strong></p>
<h3 id="数据的向量表示"><a href="#数据的向量表示" class="headerlink" title="数据的向量表示"></a>数据的向量表示</h3><p>一般情况下，在数据挖掘和机器学习中，数据被表示为向量</p>
<p>例如：某宝2012年全年的流量以及交易情况可以看成一组记录的集合，其中每一天的数据是一条记录，列向量格式如下：</p>
<p>$（浏览量，访客数，下单数，成交数，成交金额）^T$</p>
<p>$(500, 240, 25, 13, 2312.15)^T$</p>
<h3 id="降维问题：目的和原则"><a href="#降维问题：目的和原则" class="headerlink" title="降维问题：目的和原则"></a>降维问题：目的和原则</h3><p>机器学习算法的<strong>复杂度通常与数据的维数有着密切关系</strong>，甚至与维数呈指数级关联</p>
<p>机器学习在实际中处理成千上万甚至几十万维的情况也不罕见，在这种情况下，机器学习的资源消耗是不可接受的，因此我们必须对数据进行降维</p>
<p><strong>降维当然意味着信息的丢失</strong>，不过鉴于实际数据本身常常存在的相关性，我们可以想办法在降维的同时将信息的损失尽量降低</p>
<h3 id="降维的数学支撑"><a href="#降维的数学支撑" class="headerlink" title="降维的数学支撑"></a>降维的数学支撑</h3><h4 id="向量的表示和基变换：内积和投影"><a href="#向量的表示和基变换：内积和投影" class="headerlink" title="向量的表示和基变换：内积和投影"></a>向量的表示和基变换：内积和投影</h4><p>两个维数相同的向量的内积被定义为：</p>
<p>$(a_1, a_2, …, a_n) * (b_1, b_2,…, b_n)^T = a_1 b_1 + 2_2 b_2 +… + a_n b_n$</p>
<p>内积运算将两个向量映射为一个实数</p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1574673944019.png" alt="1574673944019"></p>
<p>设A和B是两个n维向量，n维向量可以等价表示为n维空间中的一条从原点发射的有向线段：</p>
<p>$A=(x_1, y_1)$   $B=(x_2, y_2)$</p>
<p>从A点向B所在直线上引一条垂线。垂线与B的交点叫做A在B上的投影，设A与B的夹角为$\alpha$，则投影的矢量长度为$|A|cos(\alpha)$</p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1574674147016.png" alt="1574674147016"></p>
<p>其中$|A|=\sqrt{x_1^2+y_1^2}$是向量$A$的模，也就是$A$线段的标量长度</p>
<p>可以将内积表示成另外一种我们熟悉的形式</p>
<p>$A \cdot B = |A||B|cos(\alpha)$</p>
<p>A与B的内积等于A到B的投影长度乘以B的模</p>
<p>设B的模为1，即让$|B| = 1$,那么就变成了$A \cdot B = |A|cos(\alpha)$</p>
<p>即A与B的内积等于A向B所在直线投影的矢量长度</p>
<h4 id="基的数学含义"><a href="#基的数学含义" class="headerlink" title="基的数学含义"></a>基的数学含义</h4><p>要准确描述向量，首先要确定一组基，然后给出在基所在的各个直线上的投影值</p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1574674438265.png" alt="1574674438265"></p>
<p>例如，$(1, 1)$和$(-1, 1)$也可以成为一组基，标准化之后变成$(\frac 1 {\sqrt{2}}, \frac 1 {\sqrt{2}})$和$(-\frac 1 {\sqrt{2}}, \frac 1 {\sqrt{2}})$</p>
<p>$(3, 2)$在新基上的坐标为$(\frac 5 {\sqrt{2}}, -\frac 1 {\sqrt{2}})$</p>
<h4 id="基变换的矩阵表示"><a href="#基变换的矩阵表示" class="headerlink" title="基变换的矩阵表示"></a>基变换的矩阵表示</h4><p>$(3, 2)$的基变换（基是：$\left(\frac{1}{\sqrt{2}}, \frac{1}{\sqrt{2}}\right) 和\left(-\frac{1}{\sqrt{2}}, \frac{1}{\sqrt{2}}\right)$）</p>
<p>$\left(\begin{array}{cc}{1 / \sqrt{2}} &amp; {1 / \sqrt{2}} \ {-1 / \sqrt{2}} &amp; {1 / \sqrt{2}}\end{array}\right)\left(\begin{array}{l}{3} \ {2}\end{array}\right)=\left(\begin{array}{c}{5 / \sqrt{2}} \ {-1 / \sqrt{2}}\end{array}\right)$</p>
<p>例如$(1,1),(2,2),(3,3)$的基变换：</p>
<p>$\left(\begin{array}{cc}{1 / \sqrt{2}} &amp; {1 / \sqrt{2}} \ {-1 / \sqrt{2}} &amp; {1 / \sqrt{2}}\end{array}\right)\left(\begin{array}{ccc}{1} &amp; {2} &amp; {3} \ {1} &amp; {2} &amp; {3}\end{array}\right)=\left(\begin{array}{ccc}{2 / \sqrt{2}} &amp; {4 / \sqrt{2}} &amp; {6 / \sqrt{2}} \ {0} &amp; {0} &amp; {0}\end{array}\right)$</p>
<p>注意，这里的每一组向量都需要以<strong>列向量</strong>的形式来表示</p>
<p>一般的，如果有M个N维向量，想将其变换为由R个N维向量表示的新空间。那么首先将R个基按行组成矩阵A，然后将向量按列组成矩阵B，那么两矩阵的乘积AB就是变换结果，其中AB的第m列为A中第m列变换后的结果</p>
<p>数学表示为：</p>
<p>$\left(\begin{array}{c}{p_{1}} \ {p_{2}} \ {\vdots} \ {p_{R}}\end{array}\right)\left(\begin{array}{cccc}{a_{1}} &amp; {a_{2}} &amp; {\cdots} &amp; {a_{M}}\end{array}\right)=\left(\begin{array}{cccc}{p_{1} a_{1}} &amp; {p_{1} a_{2}} &amp; {\cdots} &amp; {p_{1} a_{M}} \ {p_{2} a_{1}} &amp; {p_{2} a_{2}} &amp; {\cdots} &amp; {p_{2} a_{M}} \ {\vdots} &amp; {\vdots} &amp; {\ddots} &amp; {\vdots} \ {p_{R} a_{1}} &amp; {p_{R} a_{2}} &amp; {\cdots} &amp; {p_{R} a_{M}}\end{array}\right)$</p>
<p>其中$p_i$是一个行向量，表示第$i$个基，$a_j$是一个列向量，表示第$j$个原始数据记录</p>
<h4 id="协方差矩阵及优化目标"><a href="#协方差矩阵及优化目标" class="headerlink" title="协方差矩阵及优化目标"></a>协方差矩阵及优化目标</h4><p>如果我们有一组N维向量，现在要将其降到K维（K小于N），应该如何选择K个基才能最大程度保留原有信息呢？</p>
<p>假设数据由五条记录构成，将他们表示成矩阵形式：<br>$\left(\begin{array}{lllll}{1} &amp; {1} &amp; {2} &amp; {4} &amp; {2} \ {1} &amp; {3} &amp; {3} &amp; {4} &amp; {4}\end{array}\right)$</p>
<p>其中每一列为一条数据，而一行为一个字段，为了后续处理方便，首先<strong>将每个字段的所有值都减去字段均值</strong>（后面会解释原因）</p>
<p>结果如下：</p>
<p>$\left(\begin{array}{ccccc}{-1} &amp; {-1} &amp; {0} &amp; {2} &amp; {0} \ {-2} &amp; {0} &amp; {0} &amp; {1} &amp; {1}\end{array}\right)$</p>
<p>图上显示为：</p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1574675289268.png" alt="1574675289268"></p>
<p>我们希望使用一维来表示这些数据，但是又希望尽量保留原始数据，要如何选择呢？</p>
<p>通过基变换的讨论我们知道，这个问题实际上是要在二维平面中选择一个方向，将所有数据都投影到这个方向所在直线上，用投影值表示原始记录。这是一个实际的二维降到一维的问题。 </p>
<p>如果向X轴投影，则最左边的两个点会重叠在一起，中间的两个点也会重叠在一起，于是本身五个各不相同的点投影之后只剩下两个不同的值了，这是一种严重的信息丢失。投影到Y轴也会发生先这样的问题，所以，单独选择X轴和Y轴都不是最好的投影选择</p>
<h4 id="方差"><a href="#方差" class="headerlink" title="方差"></a>方差</h4><p>目标：投影后投影值尽可能分散，而这种程度的分散，可以用数学上的方差来表述。此处，一个字段的方差可以看做是每个元素与字段均值的差的平方和的均值，即</p>
<p>$\operatorname{Var}(a)=\frac{1}{m} \sum_{i=1}^{m}\left(a_{i}-\mu\right)^{2}$</p>
<p>由于上面已经将每个字段的均值都化为0了，因此方差可以直接用每个元素的平方和除以元素个数表示：</p>
<p>$\operatorname{Var}(a)=\frac{1}{m} \sum_{i=1}^{m} a_{i}^{2}$</p>
<p>于是上面的问题被形式化的表述为：寻找一个一维基，使得所有数据变换为这个基上的坐标表示后，方差值最大</p>
<h4 id="协方差"><a href="#协方差" class="headerlink" title="协方差"></a>协方差</h4><p>目的：从直观上说，让两个字段尽可能表示更多的原始信息，不希望他们之间存在线性（相关性）的，因为相关性意味着这两个字段不是完全独立，必然存在重复表示的信息</p>
<p>数学上可以用两个字段的协方差来表示其相关性，由于已经让每个字段均值为0，则：</p>
<p>$\operatorname{Cov}(a, b)=\frac{1}{m} \sum_{i=1}^{m} a_{i} b_{i}$</p>
<p>可以看到，在字段均值为0的情况下，两个字段的协方差简洁的表示为其内积除以元素数m</p>
<p>当协方差为0时，表示两个字段完全独立。为了让协方差为0，我们选择第二个基时，只能与在第一个基正交的方向上选择。因此最终选择的两个方向一定是正交的</p>
<p>至此，我们得到了降维问题的优化目标：将一组N为向量降为K维（K大于0，小于N），其目标是选择K个单位（模为1）正交基，使得原始数据变换到这组基上后，各字段两辆间协方差为0，而字段的方差则尽可能大（在正交的约束下，取最大的K个方差）</p>
<h4 id="协方差矩阵"><a href="#协方差矩阵" class="headerlink" title="协方差矩阵"></a>协方差矩阵</h4><p>目的：降维的指标与字段内方差及字段间协方差有密切关系。因此，可将两者统一表示</p>
<p>$X=\left(\begin{array}{llll}{a_{1}} &amp; {a_{2}} &amp; {\cdots} &amp; {a_{m}} \ {b_{1}} &amp; {b_{2}} &amp; {\cdots} &amp; {b_{m}}\end{array}\right)$</p>
<p>用X乘以X的转置，并乘上系数1/m</p>
<p>$\frac{1}{m} X X^{\top}=\left(\begin{array}{cc}{\frac{1}{m} \sum_{i=1}^{m} a_{i}^{2}} &amp; {\frac{1}{m} \sum_{i=1}^{m} a_{i} b_{i}} \ {\frac{1}{m} \sum_{i=1}^{m} a_{i} b_{i}} &amp; {\frac{1}{m} \sum_{i=1}^{m} b_{i}^{2}}\end{array}\right)$</p>
<ul>
<li>矩阵对角线上的两个元素分别是两个字段的方差，而其他元素是a和b的协方差</li>
<li>两者被统一到了一个矩阵</li>
</ul>
<h4 id="协方差矩阵推广"><a href="#协方差矩阵推广" class="headerlink" title="协方差矩阵推广"></a>协方差矩阵推广</h4><p>我们有m个n维数据记录，将其按列排成n乘m的矩阵X，设$C=\frac 1 m X X^T$，则C是一个对称矩阵，其对角线分别为各个字段的方差</p>
<p>而第i行j列的元素和第j行i列的元素相同，表示i和j两个字段的协方差</p>
<p>$\frac{1}{m} X X^{\top}=\left(\begin{array}{cc}{\frac{1}{m} \sum_{i=1}^{m} a_{i}^{2}} &amp; {\frac{1}{m} \sum_{i=1}^{m} a_{i} b_{i}} \ {\frac{1}{m} \sum_{i=1}^{m} a_{i} b_{i}} &amp; {\frac{1}{m} \sum_{i=1}^{m} b_{i}^{2}}\end{array}\right)$</p>
<h4 id="协方差矩阵对角化"><a href="#协方差矩阵对角化" class="headerlink" title="协方差矩阵对角化"></a>协方差矩阵对角化</h4><p>目标：将协方差矩阵对角化，即除对角线外的其他元素化为0，并且在对角线上将元素按大小从上到下排列</p>
<p>原矩阵与基变换后矩阵协方差矩阵的关系：</p>
<p>设原始数据矩阵$X$对应的协方差矩阵为$C$，而$P$是一组基按行组成的矩阵，设$Y=PX$，则$Y$为$X$对$P$做基变换后的数据。设$Y$的协方差矩阵为$D$，我们推导一下$D$与$C$的关系：</p>
<p>$\begin{aligned} D &amp;=\frac{1}{m} Y Y^{\top} \ &amp;=\frac{1}{m}(P X)(P X)^{\top} \ &amp;=\frac{1}{m} P X X^{\top} P^{\top} \ &amp;=P\left(\frac{1}{m} X X^{\top}\right) P^{\top} \ &amp;=P C P^{\top} \end{aligned}$</p>
<p>$P$能让原始的协方差矩阵对角化的$P$。换句话说，优化目标变成了寻找一个矩阵$P$，满足$PCP^T$是一个对角矩阵，并且对角元素按大到小一次排列，那么$P$的前$K$行就是要寻找的基，用$P$的前$K$行组成的矩阵乘以$X$就是的$X$从$N$维降到了$K$维并满足上述优化条件</p>
<p>由上文知道，协方差矩阵C是一个对称矩阵，在线性代数上，实对称矩阵有一系列非常好的性质：</p>
<ul>
<li><p>实对称矩阵不同特征值对应的特征向量必然正交</p>
</li>
<li><p>设特征向量$\lambda$重数为$r$，则必然存在r个线性无关的特征向量对应于$\lambda$，因此可以将这r个特征向量单位正交化。由上面两条可知，一个n行n列的实对称矩阵一定可以找到n个单位正交特征向量，设这n个特征向量为e1, e2, …, en，将其按列组成矩阵：</p>
<p>$E=(e_1, e_2, …, e_n)$</p>
<p>则对协方差矩阵C有如下结论：</p>
<p>$E^{\top} C E=\Lambda=\left(\begin{array}{cccc}{\lambda_{1}} &amp; {} &amp; {} &amp; {} \ {} &amp; {\lambda_{2}} &amp; {} &amp; {} \ {} &amp; {} &amp; {\ddots} &amp; {} \ {} &amp; {} &amp; {} &amp; {\lambda_{n}}\end{array}\right)$</p>
</li>
</ul>
<p>其中$\Lambda$为对角矩阵，其对角元素为各特征向量对应的特征值（可能有重复）</p>
<p>到这里，我们已经找到了需要的矩阵P：</p>
<p>$P=E^T$</p>
<p>P是协方差矩阵的特征向量单位化后按行排列出的矩阵，其中每一行都是C的一个特征向量。如果设P按照$\Lambda$中特征值的从大到小，将特征向量从上到下排列，则用P的前K行组成的矩阵乘以原始数据矩阵X，就得到了我们需要的降维后的数据矩阵Y</p>
<h3 id="PCA算法"><a href="#PCA算法" class="headerlink" title="PCA算法"></a>PCA算法</h3><p>设有m条n维数据</p>
<ul>
<li><p>将原始数据按列组成n行m列矩阵X</p>
</li>
<li><p>将X的每一行（代表一个属性字段）进行零均值化，即减去这一行的均值</p>
</li>
<li><p>求出协方差矩阵$C=\frac 1 m X X^T$</p>
</li>
<li><p>求出协方差矩阵的特征值以及对应的特征向量</p>
</li>
<li><p>将特征向量按对应特征值大小从上到下按行排列成矩阵，取前k行组成矩阵P</p>
</li>
<li><p>$Y=PX$即为降维到K为之后的数据</p>
</li>
</ul>
<h3 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h3><p>以上文提到的</p>
<p>$\left(\begin{array}{ccccc}{-1} &amp; {-1} &amp; {0} &amp; {2} &amp; {0} \ {-2} &amp; {0} &amp; {0} &amp; {1} &amp; {1}\end{array}\right)$</p>
<p>为例，我们用PCA方法将这组二维数据降到一维</p>
<p>因为每行已经是零均值，所以直接求协方差矩阵</p>
<p>$C=\frac{1}{5}\left(\begin{array}{ccccc}{-1} &amp; {-1} &amp; {0} &amp; {2} &amp; {0} \ {-2} &amp; {0} &amp; {0} &amp; {1} &amp; {1}\end{array}\right)\left(\begin{array}{cc}{-1} &amp; {-2} \ {-1} &amp; {0} \ {0} &amp; {0} \ {2} &amp; {1} \ {0} &amp; {1}\end{array}\right)=\left(\begin{array}{cc}{\frac{6}{5}} &amp; {\frac{4}{5}} \ {\frac{4}{5}} &amp; {\frac{6}{5}}\end{array}\right)$</p>
<p>然后求其特征值和特征向量</p>
<p>$\lambda_{1}=2, \lambda_{2}=2 / 5$</p>
<p>其对应的特征向量分别是：</p>
<p>$c_{1}\left(\begin{array}{c}{1} \ {1}\end{array}\right), c_{2}\left(\begin{array}{c}{-1} \ {1}\end{array}\right)$</p>
<p>其中对应的特征向量分别是一个通解，$c_1$和$c_2$可取任意实数，那么标准化后的特征向量为：</p>
<p>$\left(\begin{array}{c}{1 / \sqrt{2}} \ {1 / \sqrt{2}}\end{array}\right),\left(\begin{array}{c}{-1 / \sqrt{2}} \ {1 / \sqrt{2}}\end{array}\right)$</p>
<p>矩阵P为：</p>
<p>$P=\left(\begin{array}{cc}{1 / \sqrt{2}} &amp; {1 / \sqrt{2}} \ {-1 / \sqrt{2}} &amp; {1 / \sqrt{2}}\end{array}\right)$</p>
<p>可以验证协方差矩阵C的对角化：</p>
<p>$P C P^{\top}=\left(\begin{array}{cc}{1 / \sqrt{2}} &amp; {1 / \sqrt{2}} \ {-1 / \sqrt{2}} &amp; {1 / \sqrt{2}}\end{array}\right)\left(\begin{array}{cc}{6 / 5} &amp; {4 / 5} \ {4 / 5} &amp; {6 / 5}\end{array}\right)\left(\begin{array}{cc}{1 / \sqrt{2}} &amp; {-1 / \sqrt{2}} \ {1 / \sqrt{2}} &amp; {1 / \sqrt{2}}\end{array}\right)=\left(\begin{array}{cc}{2} &amp; {0} \ {0} &amp; {2 / 5}\end{array}\right)$</p>
<p>最后我们用P的第一行乘以数据矩阵，就得到的降维后的表示：</p>
<p>$Y=\left(\begin{array}{llllll}{-1} &amp; {-1} &amp; {0} &amp; {2} &amp; {0} \ {-2} &amp; {0} &amp; {0} &amp; {1} &amp; {1}\end{array}\right)=\left(\begin{array}{cccc}{-3 / \sqrt{2}} &amp; {-1 / \sqrt{2}} &amp; {0} &amp; {3 / \sqrt{2}} &amp; {-1 / \sqrt{2}}\end{array}\right)$</p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1574686204617.png" alt="1574686204617"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://woojoo520.github.io/2019/11/24/损失函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mariana">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Celery Fairy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/24/损失函数/" itemprop="url">损失函数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-24T13:36:54+08:00">
                2019-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="损失函数"><a href="#损失函数" class="headerlink" title="损失函数"></a>损失函数</h2><h3 id="平方误差损失"><a href="#平方误差损失" class="headerlink" title="平方误差损失"></a>平方误差损失</h3><p>每个训练样本的平方误差损失（也称为L2 Loss）是实际值和预测值之差的平方</p>
<p><img src="https://pic2.zhimg.com/v2-776284ef8ef1892adca72454c80723dd_b.jpg" alt="img"></p>
<p>相应的成本函数是这些平方误差的平均值（MSE），它是一个二次函数（形式为ax^2+bx+c），并且值大于等于0,。二次函数具有全局最小值，由于没有局部最小值，所以永远不会陷入它。因此，可以保证梯度下降将收敛到全局最小值（如果完全收敛的话）</p>
<p>MSE损失函数通过使用平方误差来惩罚模型，有一个缺点，把一个比较大的数的平方会使它变得更大。但有一点需要注意，这个属性使<strong>MSE成本函数对异常值的健壮性降低。因此，如果我们的数据容易出现许多的异常值，则不应该使用它</strong></p>
<h3 id="绝对误差损失"><a href="#绝对误差损失" class="headerlink" title="绝对误差损失"></a>绝对误差损失</h3><p>每个训练样本的绝对误差是预测值和实际值之间的距离，与符号无关。绝对误差也称为L1 Loss</p>
<p><img src="https://pic2.zhimg.com/v2-77f5689dd45999c25bb55a1008e2cdf1_b.jpg" alt="img"></p>
<p>成本是这些绝对误差的平均值（MAE）。与MSE相比，<strong>MAE成本对异常值更加健壮</strong>。但是，<strong>在数学方程中处理绝对或模数运算符并不容易</strong>。</p>
<h3 id="Huber损失"><a href="#Huber损失" class="headerlink" title="Huber损失"></a>Huber损失</h3><p>结合了MSE和MAE的最佳特性。对于较小的误差，他是二次的，否则是线性的（对于其梯度也是如此）。Huber损失需要确定$\delta$参数</p>
<p><img src="https://pic2.zhimg.com/v2-333ad2d90605b5d0de9ee4ec509ee49d_b.jpg" alt="img"></p>
<p>Huber损失对于异常值比MSE更强。<strong>它用于稳健回归，M估计法（M-estimator）和可加模型（additive model）。Huber损失的变体也可用于分类。</strong></p>
<h3 id="二分类损失函数"><a href="#二分类损失函数" class="headerlink" title="二分类损失函数"></a>二分类损失函数</h3><p>给分类基于应用于输入特征向量的规则则</p>
<h4 id="二元交叉熵损失"><a href="#二元交叉熵损失" class="headerlink" title="二元交叉熵损失"></a>二元交叉熵损失</h4><p>熵是用来表示无序性和不确定性。测量具有芥蓝菜分布$P(X)$的随机变量X</p>
<p><img src="https://pic4.zhimg.com/v2-dd86aad2ba3885b36dfc9db902baadc3_b.jpg" alt="img"></p>
<p>负号使用于最后结果为正数</p>
<blockquote>
<p>概率分布的熵值越大，表明分布的不确定性越大。同样，一个较小的值代表一个更确定的分布</p>
</blockquote>
<p>这使得二元交叉熵适合作为损失函数（你希望最小化其值）。我们对输出概率p的分类模型使用二元交叉熵损失</p>
<blockquote>
<p>元素属于第1类（或正类）的概率=p</p>
<p>元素属于第0类（或负类）的概率=1-p</p>
</blockquote>
<p>然后，输出标签y（可以取值0和1）的交叉熵损失和预测概率p定义为：</p>
<p><img src="https://pic2.zhimg.com/v2-47ddb7df995d3978f53bd2b877e4c25d_b.jpg" alt="img"></p>
<p>这也称为Log-Loss（对数损失）。为了计算概率p，可以使用sigmoid函数。其中，z是输入功能的函数</p>
<p><img src="https://pic1.zhimg.com/v2-d6a0a7f3bb804cd5c0dcaa2f1b908ee8_b.jpg" alt="img"></p>
<p>sigmoid函数的范围是[0, 1]这使得它适合于计算概率</p>
<p><img src="https://pic1.zhimg.com/v2-95dba4bbda5ed968482df244137cbcf4_b.jpg" alt="img"></p>
<h4 id="Hinge损失"><a href="#Hinge损失" class="headerlink" title="Hinge损失"></a>Hinge损失</h4><p><strong>Hinge损失主要用于带有类标签-1和1的支持向量机（SVM）</strong>。因此，请确保将数据集中“恶性”类标签从0更改为-1</p>
<blockquote>
<p>Hinge损失不仅会惩罚错误的预测，还会惩罚不自信的正确预测</p>
</blockquote>
<p>数据对<code>(x, y)</code>的Hinge损失如图：</p>
<p><img src="https://pic4.zhimg.com/v2-739534b9c71db800ca910f72a3152e13_b.jpg" alt="img"></p>
<p>Hinge损失简化了SVM的数学运算，同时最大化了损失（与对数损失（Log-Loss）相比）。当我们想要做实时决策而不是高度关注准确性时，就可以使用它</p>
<h3 id="多分类损失函数"><a href="#多分类损失函数" class="headerlink" title="多分类损失函数"></a>多分类损失函数</h3><h4 id="多分类交叉熵"><a href="#多分类交叉熵" class="headerlink" title="多分类交叉熵"></a>多分类交叉熵</h4><p>多分类交叉熵损失是二元交叉熵损失的退矿。输入向量$X_i$和相应的ont-hot编码目标向量$Y_i$的损失是：</p>
<p><img src="https://pic2.zhimg.com/v2-c465dd0ad165c0e3501d7d6608188c41_b.jpg" alt="img"></p>
<p>使用softmax函数来找到概率$P_{ij}$</p>
<p><img src="https://pic3.zhimg.com/v2-953d3605358f94ee5833084e75705756_b.jpg" alt="img"></p>
<p>softmax层是接在神经网络的输出层前。Softmax层必须与输出层具有相同数量的节点</p>
<p><img src="https://pic3.zhimg.com/v2-be2d1fea2669befa924891c3bd7c8e12_b.jpg" alt="img"></p>
<p>最后，我们的输出是具有给定输入的最大概率的类别</p>
<h4 id="KL散度"><a href="#KL散度" class="headerlink" title="KL散度"></a>KL散度</h4><p>KL散度是概率分布与另一个概率分布区别的度量。KL散度为零表示分布相同</p>
<p><img src="https://pic3.zhimg.com/v2-e78029297910deac90414234151aca9e_b.jpg" alt="img"></p>
<p>注意，发散函数不对称</p>
<p>与多分类分类相比，KL散度更常用于逼近复杂函数。我们在使用变分自动编码器（VAE）等深度生成模型时经常使用KL散度</p>
<h3 id="Pytorch实战"><a href="#Pytorch实战" class="headerlink" title="Pytorch实战"></a>Pytorch实战</h3><p>损失函数的基本用法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">criterion = LossCriterion()	# 构造函数有自己的参数</span><br><span class="line">loss = criterion(x, y)		# 调用标准时也有参数</span><br></pre></td></tr></table></figure>

<p>得到的loss结果已经对mini-batch数量取了平均值</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://woojoo520.github.io/2019/11/24/DANN/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mariana">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Celery Fairy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/24/DANN/" itemprop="url">DANN</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-24T12:37:33+08:00">
                2019-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="EANN"><a href="#EANN" class="headerlink" title="EANN"></a>EANN</h2><h3 id="Domain-Adaption"><a href="#Domain-Adaption" class="headerlink" title="Domain Adaption"></a>Domain Adaption</h3><p>主要目的：</p>
<p>想想一个分类任务，假设现在我们手中有源域数据和目标域数据。其中源域数据是丰富并且有标记的，而目标域数据是充足的但是没有标记的，但是源域和目标域的特征空间和标记空间相同。很显然，我们可以利用源域数据建立一个分类器，但是由于目标域数据本身没有标记，那么我们无法通过常规方法为目标域构建分类器，这时候就需要用到Domain Adaption了：</p>
<p><img src="https://pic2.zhimg.com/80/v2-0975878ddcedfaf101b10358317b8691_hd.jpg" alt="img"></p>
<p>Domain Adaptation的思想就是通过消除源域和目标域的分布差异，使得源域数据和目标域数据能同时被分开。</p>
<h3 id="DANN（Domain-Adaptation-Training-of-Neural-Networks）"><a href="#DANN（Domain-Adaptation-Training-of-Neural-Networks）" class="headerlink" title="DANN（Domain-Adaptation Training of Neural Networks）"></a>DANN（Domain-Adaptation Training of Neural Networks）</h3><p>DANN的应用背景：</p>
<p>源域数据充足并且有标记，目标域数据充足但是无标记，源域和目标域的特征空间和标记空间相同，任务是借助源域数据对目标域数据进行分类</p>
<p>DANN结构：</p>
<p><img src="https://pic2.zhimg.com/80/v2-4fc596dfbc7f7ff56b32df7d0f7c0c71_hd.jpg" alt="img"></p>
<p>网络分为三部分：</p>
<ul>
<li>Feature extractor（特征提取器）<ul>
<li>提取后续网络后续完成任务所需要的特征</li>
<li>将源域样本和目标域样本进行映射和混合</li>
</ul>
</li>
<li>Label extractoe（域分类器）<ul>
<li>利用Feature extractor提取的信息对样本进行分类</li>
</ul>
</li>
<li>Domain classifier（域分类器）<ul>
<li>判断feature extractor提取的信息来自源域还是目标域</li>
</ul>
</li>
</ul>
<p>特征提取器提取的信息会传入域分类器，之后域分类器会判断传入的信息到底是来自于源域还是目标域，并计算损失。在反向传播更新参数的过程中，域分类器和特征提取器中间有一个梯度翻转层，也就是说域分类器的训练目标是尽量将输入的信息分到正确的域类别（源域还是目标域），而特征提取与的训练目的恰恰相反（由于梯度翻转层的存在），特征提取器所提取的特征（或者说映射的结果）目的是使域判别器不能正确的判断出信息是来自哪一个域，因此形成一种对抗关系。课件，当域分类器不能将接受的信息正确分为源域样本还是目标域样本时，特征提取器的任务就圆满完成了，因为此时源域样本和目标域样本在某个空间中已经被混合在一起不能分开了。</p>
<p>但是，我们最终的目的是对目标域样本进行分类，那么我们如何保证特征提取器提取的信息是能够用来分类的呢？加入无论输入什么样本给特征提取器，它都输出一个单位向量，这样依旧可以”骗过“域分类器，但是却无法完成后续的分类工作。</p>
<p>这个时候就需要靠Label predictor（类别预测期），因为源域样本是有标记的，所以在提取特征时不仅仅要考虑后面的域判别器的情况，还要利用源域的带标记样本进行有监督训练从而兼顾分类的准确性。</p>
<p>综上，当把特征提取器、域分类器和类别预测器都训练完成后，就可以做到把源域和目标域混合在一起并进行分类了：</p>
<p><img src="https://pic1.zhimg.com/80/v2-fd13bf28230d5e4cacd26d2149a8dd30_hd.jpg" alt="img"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://woojoo520.github.io/2019/11/22/选择合适的激活函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mariana">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Celery Fairy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/22/选择合适的激活函数/" itemprop="url">选择合适的激活函数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-22T14:44:37+08:00">
                2019-11-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="选择合适的激活函数"><a href="#选择合适的激活函数" class="headerlink" title="选择合适的激活函数"></a>选择合适的激活函数</h2><h3 id="sigmoid"><a href="#sigmoid" class="headerlink" title="sigmoid"></a>sigmoid</h3><h4 id="图像"><a href="#图像" class="headerlink" title="图像"></a>图像</h4><p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1574406136071.png" alt="1574406136071"></p>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><p>他会将输入的数字挤压到0到1区间的范围内。是最先使用的激活函数，以为可以将它解释为一个神经元的激活率，其中0表示没激活，1表示完全激活</p>
<h4 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h4><ul>
<li><p>会导致模型的梯度消失</p>
<ul>
<li><p>当神经元的激活状态接近于0或1时，这些区域的梯度会非常接近于0</p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1574406306081.png" alt="1574406306081"></p>
<p>在反向传播期间，该局部梯度会和此处输出的梯度相乘以实现整体的目标。</p>
</li>
</ul>
</li>
<li><p>Sigmoid函数的输出并不是以0为基准，而是从0开始，到1结束。意味着函数的值会为正。因而权重的梯度会全部为正或全部为负，这会造成梯度往完全不同的方向更新，使得优化更困难</p>
</li>
</ul>
<h3 id="Tanh"><a href="#Tanh" class="headerlink" title="Tanh"></a>Tanh</h3><h4 id="图像-1"><a href="#图像-1" class="headerlink" title="图像"></a>图像</h4><p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1574406487079.png" alt="1574406487079"></p>
<h4 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h4><p>他会将数字压缩到-1到1区间内。所以他的输出以0为基准，使优化更加容易</p>
<h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p>梯度消失</p>
<h3 id="ReLU"><a href="#ReLU" class="headerlink" title="ReLU"></a>ReLU</h3><h4 id="图像-2"><a href="#图像-2" class="headerlink" title="图像"></a>图像</h4><p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1574406572298.png" alt="1574406572298"></p>
<h4 id="特点-2"><a href="#特点-2" class="headerlink" title="特点"></a>特点</h4><p>max（input， 0）</p>
<p>不会涉及大量运算，因此它能更快的学习，也避免了梯度消失的问题</p>
<p>但是他<strong>只用在隐藏层</strong>中，<strong>输出层应该用Softmax函数用于分类，因为它能生成不同类别的概率</strong>。在<strong>回归问题中使用线性函数</strong>，因为通过它的数据信号不会变</p>
<h4 id="问题-1"><a href="#问题-1" class="headerlink" title="问题"></a>问题</h4><p>部分神经元在训练中会很脆弱，甚至会死掉。这就意味着较大的梯度通过ReLU函数时会导致梯度更新，使得无法再次激活任何数据点</p>
<p>解决方法：Leaky ReLU</p>
<h3 id="经验"><a href="#经验" class="headerlink" title="经验"></a>经验</h3><ul>
<li>深度学习往往需要大量时间来处理大量数据，模型的收敛速度是尤为重要的。所以，总体上来讲，训练深度学习网络尽量使用zero-centered数据（可以经过数据预处理实现）和zero-cintered输出。所以要尽量选择输出具有zero-centered特点的激活函数以加快模型的收敛速度</li>
<li>如果使用ReLU，那么一定要小心设置learning rate，而且注意不要让网络出现很多“dead”神经元，如果这个问题不好解决，可以试试Leaky-ReLU、PReLU或者Maxout</li>
<li>最好不要使用sigmoid，可以试试tanh，不过可以预期他的效果会比不上ReLU和Maxout</li>
</ul>
<h3 id="神经网络的输入为什么要0均值化"><a href="#神经网络的输入为什么要0均值化" class="headerlink" title="神经网络的输入为什么要0均值化"></a>神经网络的输入为什么要0均值化</h3><p>这样做的优点是为了在反向传播中加快网络中每一层权重参数的收敛。</p>
<p>为什么0均值化就会加快收敛呢？</p>
<p><img src="https://pic4.zhimg.com/v2-bc1465b4377a5c1f7762514093a43be7_b.jpg" alt="img"></p>
<p>在梯度下降的时候，假设途中蓝色箭头方向为理想最优向量，根据公式，可以想到：</p>
<p>当x全为正或者全为负时，每次返回的梯度都只会沿着一个方向发生变化，这样就回使得权重收敛效率很低</p>
<p>当正负数量“差不多”时，那么梯度的变化方向就会不确定，这样就能达到上图中的变化效果，加速了权重的收敛</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://woojoo520.github.io/2019/11/22/AutoEncoder/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mariana">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Celery Fairy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/22/AutoEncoder/" itemprop="url">AutoEncoder</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-22T14:25:00+08:00">
                2019-11-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="AutoEncoder"><a href="#AutoEncoder" class="headerlink" title="AutoEncoder"></a>AutoEncoder</h2><h3 id="压缩与解压"><a href="#压缩与解压" class="headerlink" title="压缩与解压"></a>压缩与解压</h3><p>有一个神经网络，他在做的事情是：接受一张图片，然后给他打码，最后再从打码的图片中还原。</p>
<p><img src="https://pic3.zhimg.com/v2-7370f2fd8e6dabe4b24b71118ebf3b52_b.png" alt="img"></p>
<p>假设刚刚的神经网络是这样，对应上刚刚的图片，可以看出，图片实际上是经过了压缩，再解压的这一道工序，原有的图片质量被缩减，解压时用信息量小却包含了所有关键信息的文件恢复出原本的图片。</p>
<p>为什么要这样做呢？</p>
<p><img src="https://pic2.zhimg.com/v2-948d5ede26f9e6c0e484640b92c1dcad_b.png" alt="img"></p>
<p>有的时候神经网路偶要接受大量的输入信息，比如输入信息是高清图片时。输入信息可能达到上千万，让神经网络直接从上千万个信息源中学习是一件很吃力的事情，所以，何不压缩一下，提取出原图片中的最具代表性的信息，缩减信息量，再把缩减过后的信息放进神经网络学习，这样学习起来就简单轻松很多了，所以，自编码就能在这时发挥作用。</p>
<p>通过将元数据白色的X压缩，解压成黑色的X，然后通过对比黑白，求出预测误差，进行反向传递，逐步提升自编码的准确性，训练好的自编码中间这一部分就是元数据的精髓，可以看出，从头到尾，我们只用到了输入数据X，并没有用到X对应的数据标签，所以也可以说自编码是一种非监督学习</p>
<p>到了真正使用自编码的时候，通常只会用到自编码的前半部分。</p>
<h3 id="编码器Encoder"><a href="#编码器Encoder" class="headerlink" title="编码器Encoder"></a>编码器Encoder</h3><p><img src="https://pic2.zhimg.com/v2-948d5ede26f9e6c0e484640b92c1dcad_b.png" alt="img"></p>
<p>编码器得到原数据的精髓，然后我们只需要再创建一个小的神经网络学习这个精髓的数据，不仅减少了神经网络的负担，而且同样能达到很好的效果</p>
<p><img src="https://pic1.zhimg.com/v2-9032ff2d01cdb7310245c7f397289550_b.png" alt="img"></p>
<p>这是通过一个自编码整理出来的数据，他能从原数据中总结出每种类型数据的特征，如果把这些特征全部放在一张二维的图片上，每种类型都已经被很好的用原数据的精髓区分开来。</p>
<p>PCA主成分分析，在提取主要特征时，自编码和PCA一样，甚至超越了PCA。换句话说自编码可以像PCA一样给特征属性降维。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://woojoo520.github.io/2019/11/21/Python可视化数据/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mariana">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Celery Fairy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/21/Python可视化数据/" itemprop="url">Python可视化数据</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-21T08:06:51+08:00">
                2019-11-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="绘制热力图"><a href="#绘制热力图" class="headerlink" title="绘制热力图"></a>绘制热力图</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://woojoo520.github.io/2019/11/21/Scrapy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mariana">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Celery Fairy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/21/Scrapy/" itemprop="url">Scrapy</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-21T07:07:29+08:00">
                2019-11-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Scrapy"><a href="#Scrapy" class="headerlink" title="Scrapy"></a>Scrapy</h2><p>在安装完Scrapy<code>(pip install scrapy)</code>之后，创建一个scrapy项目</p>
<blockquote>
<p>scrapy startproject tutorial</p>
</blockquote>
<p>该Scrapy项目下都包含了以下内容</p>
<blockquote>
<p>|-tutorial        该项目的python模块。在此放入代码（核心）</p>
<p>|-scrapy.cfg    项目的配置文件</p>
<p>  |-<strong>init</strong>.py</p>
<p>  |-items.py    项目中的item文件（这是创建容器的地方，爬取的信息分别放到不同的容器里面）</p>
<p>  |-middlewares.py</p>
<p>  |-pipelines.py    项目中的设置文件（设置一些基础参数，比如加头文件，设置编码等等）</p>
<p>  |-settings.py</p>
<p>  |-spiders    放置spider的目录（放爬虫的地方）</p>
<p>​    |-<strong>init</strong>.py</p>
</blockquote>
<p>里面的parse方法，有两个作用</p>
<ul>
<li><p>负责解析start_url下载的Response对象，根据item提取数据（解析item数据的前提是parse里全部requests请求都被加入了爬取队列）</p>
</li>
<li><p>如果有新的url则加入爬取队列，负责进一步处理，URL的request对象</p>
</li>
</ul>
<p>启动爬虫</p>
<p>输入命令，启动爬虫</p>
<blockquote>
<p>scrapy crawl dmoz</p>
</blockquote>
<p>启动爬虫的时候发生了什么？</p>
<p>Scrapy为</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://woojoo520.github.io/2019/11/14/Transaction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mariana">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Celery Fairy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/14/Transaction/" itemprop="url">Transaction</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-14T16:29:16+08:00">
                2019-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://woojoo520.github.io/2019/11/14/LaTeX-Day2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mariana">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Celery Fairy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/14/LaTeX-Day2/" itemprop="url">LaTeX-Day2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-14T07:09:31+08:00">
                2019-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="LaTeX源文件的结构"><a href="#LaTeX源文件的结构" class="headerlink" title="LaTeX源文件的结构"></a>LaTeX源文件的结构</h3><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 导言区，用于全局设置</span></span><br><span class="line"><span class="tag">\<span class="name">documentclass</span><span class="string">[UTF8]</span><span class="string">&#123;ctexart&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">title</span><span class="string">&#123;杂谈爱情&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">author</span><span class="string">&#123;MYQ&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">date</span><span class="string">&#123;\today&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 正文区域</span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;document&#125;</span></span></span><br><span class="line">	<span class="tag">\<span class="name">maketitle</span></span></span><br><span class="line">	Hello World!</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;document&#125;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h3><h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h4><blockquote>
<p>% 用于注释</p>
</blockquote>
<h4 id="空行"><a href="#空行" class="headerlink" title="空行"></a>空行</h4><blockquote>
<p>可以在输出时换行效果，同时使结构更加清晰，不过在源文件的多个换行效果，在输出文件，只有一个换行效果</p>
</blockquote>
<h4 id="document"><a href="#document" class="headerlink" title="document"></a>document</h4><blockquote>
<p>每一个LaTeX文件，只有一个document环境</p>
</blockquote>
<h4 id="数学公式"><a href="#数学公式" class="headerlink" title="数学公式"></a>数学公式</h4><blockquote>
<p>行内数学公式$$ </p>
</blockquote>
<blockquote>
<p>行间数学公式 $$$$</p>
</blockquote>
<h4 id="LaTeX的文件格式分类"><a href="#LaTeX的文件格式分类" class="headerlink" title="LaTeX的文件格式分类"></a>LaTeX的文件格式分类</h4><blockquote>
<p>使用$符号，数学格式，不使用，则是文本格式</p>
</blockquote>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">% 导言区，用于全局设置</span><br><span class="line">\documentclass[UTF8]&#123;ctexart&#125;</span><br><span class="line">% 导入中文宏</span><br><span class="line">\usepackage&#123;ctex&#125;</span><br><span class="line">% 构建命令，取别名，使用degree代替^ circ</span><br><span class="line">\newcommand\degree&#123;^\circ&#125;</span><br><span class="line"></span><br><span class="line">\title&#123;杂谈爱情&#125;</span><br><span class="line">\author&#123;MYQ&#125;</span><br><span class="line">\date&#123;\today&#125;</span><br><span class="line"></span><br><span class="line">% 正文区域</span><br><span class="line">\begin&#123;document&#125;</span><br><span class="line">	\maketitle</span><br><span class="line">	\kaishu</span><br><span class="line">	\par\noindent 我们的开始始于北邮图书馆\\</span><br><span class="line">	那里不是我们最开始相遇的地方\\</span><br><span class="line">	却是我们相识，了解的地方</span><br><span class="line">	\begin&#123;equation&#125;</span><br><span class="line">		A_B^2 = BC^2 +AC^2</span><br><span class="line">	\end&#123;equation&#125;</span><br><span class="line">\end&#123;document&#125;</span><br></pre></td></tr></table></figure>

<p>显示：</p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1573689463711.png" alt="1573689463711"></p>
<h4 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h4><h5 id="字体的设置"><a href="#字体的设置" class="headerlink" title="字体的设置"></a>字体的设置</h5><blockquote>
<p>黑体： \heiti</p>
<p>楷书： \kaishu</p>
</blockquote>
<h5 id="产生序号的行间数学公式：equation环境"><a href="#产生序号的行间数学公式：equation环境" class="headerlink" title="产生序号的行间数学公式：equation环境"></a>产生序号的行间数学公式：<code>equation</code>环境</h5><blockquote>
<p>\begin{equation}</p>
<p>AB^2 = BC^2+AC^2</p>
<p>\end{equation}</p>
</blockquote>
<h5 id="构建新命令：-newcommand-新命令-操作"><a href="#构建新命令：-newcommand-新命令-操作" class="headerlink" title="构建新命令：\newcommand\新命令{操作}"></a>构建新命令：<code>\newcommand\新命令{操作}</code></h5><blockquote>
<p>\newcommand\degree{^\circ}</p>
</blockquote>
<h3 id="字体设置"><a href="#字体设置" class="headerlink" title="字体设置"></a>字体设置</h3><h4 id="字体族的设置"><a href="#字体族的设置" class="headerlink" title="字体族的设置"></a>字体族的设置</h4><h5 id="字体命令"><a href="#字体命令" class="headerlink" title="字体命令"></a>字体命令</h5><blockquote>
<p>\textrm{Roman Family} 在花括号内的字体都是Roman Family字体</p>
</blockquote>
<h5 id="字体声明"><a href="#字体声明" class="headerlink" title="字体声明"></a>字体声明</h5><blockquote>
<p>\rmfamily Roman Family该命令下面的字体都是Roman Family字体，直到新的声明出现覆盖该声明</p>
</blockquote>
<p>示例</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;document&#125;</span></span></span><br><span class="line">	<span class="tag">\<span class="name">maketitle</span></span></span><br><span class="line">	<span class="comment">% \kaishu</span></span><br><span class="line">	<span class="comment">% 字体命令</span></span><br><span class="line">	<span class="tag">\<span class="name">textrm</span><span class="string">&#123;Roman Family&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">\<span class="name">textsf</span><span class="string">&#123;Sans Serif Family&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">\<span class="name">texttt</span><span class="string">&#123;Typewriter Family&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">% 字体</span></span><br><span class="line">	&#123;<span class="tag">\<span class="name">songti</span></span> 宋体&#125;</span><br><span class="line">	</span><br><span class="line">	&#123;<span class="tag">\<span class="name">heiti</span></span> 黑体&#125;</span><br><span class="line">	</span><br><span class="line">	&#123;<span class="tag">\<span class="name">kaishu</span></span> 楷书&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">% 字体声明</span></span><br><span class="line">	<span class="tag">\<span class="name">rmfamily</span></span> Roman Family</span><br><span class="line">	<span class="tag">\<span class="name">sffamily</span></span> Sans Serif Family</span><br><span class="line">	<span class="tag">\<span class="name">ttfamily</span></span> Typewriter Family</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;document&#125;</span></span></span><br></pre></td></tr></table></figure>

<p>显示：</p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1573690059972.png" alt="1573690059972"></p>
<h4 id="字体系列的设置"><a href="#字体系列的设置" class="headerlink" title="字体系列的设置"></a>字体系列的设置</h4><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 字体系列的设置（粗细，宽度）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 字体命令</span></span><br><span class="line"><span class="tag">\<span class="name">textmd</span><span class="string">&#123;Medium Series&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">textbf</span><span class="string">&#123;Boldface Series&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 字系列</span></span><br><span class="line"><span class="tag">\<span class="name">textbf</span><span class="string">&#123;粗体&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">textit</span><span class="string">&#123;斜体&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 字体声明</span></span><br><span class="line"><span class="tag">\<span class="name">mdseries</span><span class="string">&#123;Medium Series&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">bfseries</span><span class="string">&#123;Boldface Series&#125;</span></span></span><br></pre></td></tr></table></figure>

<p>显示：</p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1573690497433.png" alt="1573690497433"></p>
<h4 id="字体形状的设置"><a href="#字体形状的设置" class="headerlink" title="字体形状的设置"></a>字体形状的设置</h4><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 字体命令</span></span><br><span class="line">	<span class="tag">\<span class="name">textup</span><span class="string">&#123;Upright Shape&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">\<span class="name">textit</span><span class="string">&#123;Italic Shape&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">\<span class="name">textsl</span><span class="string">&#123;Slanted Shape&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">\<span class="name">textsc</span><span class="string">&#123;Samll Caps Shape&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">% 字体声明</span></span><br><span class="line">	<span class="tag">\<span class="name">upshape</span><span class="string">&#123;Upright Sshape&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">\<span class="name">itshape</span><span class="string">&#123;Italic Shape&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">\<span class="name">slshape</span><span class="string">&#123;Slanted Shape&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">\<span class="name">scshape</span><span class="string">&#123;Samll Caps Shape&#125;</span></span></span><br></pre></td></tr></table></figure>

<p>显示：</p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1573690825286.png" alt="1573690825286"></p>
<h4 id="字体大小的设置"><a href="#字体大小的设置" class="headerlink" title="字体大小的设置"></a>字体大小的设置</h4><p>在<code>\documentclass[可选项]{article}</code>可选项：10pt, 11pt, 12pt</p>
<h5 id="标准字体"><a href="#标准字体" class="headerlink" title="标准字体"></a>标准字体</h5><p><img src="https://upload-images.jianshu.io/upload_images/14032224-92a41bd9f5ae8d0c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/926/format/webp" alt="img"></p>
<h5 id="中文字号"><a href="#中文字号" class="headerlink" title="中文字号"></a>中文字号</h5><p><img src="https://upload-images.jianshu.io/upload_images/14032224-40678f49169abb91.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/753/format/webp" alt="img"></p>
<h3 id="函数式编写文档"><a href="#函数式编写文档" class="headerlink" title="函数式编写文档"></a>函数式编写文档</h3><h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><p>在LaTeX文档里，我们不可能满篇文章的设置字体，我们可以用：</p>
<p><code>\newcommend{cmd}{def}</code>来定义一个新的命令，把字体的整体设置放在def里，减少代码量，也利于修改</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">\<span class="name">newcommand</span><span class="string">&#123;\myfont&#125;</span><span class="string">&#123;\textit&#123;\textbf&#123;\textrm&#123;Fancy Family&#125;</span></span>&#125;&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">myfont</span><span class="string">&#123;Fancy Family&#125;</span></span></span><br></pre></td></tr></table></figure>

<p>显示：</p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1573691557272.png" alt="1573691557272"></p>
<h4 id="LaTeX的文档结构"><a href="#LaTeX的文档结构" class="headerlink" title="LaTeX的文档结构"></a>LaTeX的文档结构</h4><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>\section{}</td>
<td>一级标题</td>
</tr>
<tr>
<td>\subsection{}</td>
<td>二级标题</td>
</tr>
<tr>
<td>\subsubsection{}</td>
<td>三级标题</td>
</tr>
<tr>
<td>空行</td>
<td>用于分割段落（同时使源文档结构清晰）</td>
</tr>
<tr>
<td>空行</td>
<td>用于分割命令与结构</td>
</tr>
<tr>
<td>\</td>
<td>用于换行</td>
</tr>
<tr>
<td>\par</td>
<td>也用于换行</td>
</tr>
<tr>
<td>\chapter{}</td>
<td>章节大纲</td>
</tr>
<tr>
<td>\tableofcontents</td>
<td>生成目录</td>
</tr>
</tbody></table>
<p>第一篇文章就这样完成了！</p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1573696187883.png" alt="1573696187883"></p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1573696200304.png" alt="1573696200304"></p>
<p><img src="C:%5CUsers%5C12751%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1573696212143.png" alt="1573696212143"></p>
<p>源代码：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 导言区，用于全局设置</span></span><br><span class="line"><span class="tag">\<span class="name">documentclass</span><span class="string">[UTF8]</span><span class="string">&#123;ctexart&#125;</span></span></span><br><span class="line"><span class="comment">% 导入中文宏</span></span><br><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;ctex&#125;</span></span></span><br><span class="line"><span class="comment">% 默认情况下，目录连接是带红色的边框，如果不想这样，可以 进行以下设置</span></span><br><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">[bookmarks=true,colorlinks,linkcolor=black]</span><span class="string">&#123;hyperref&#125;</span></span></span><br><span class="line"><span class="comment">% 添加图片</span></span><br><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;graphicx&#125;</span></span></span><br><span class="line"><span class="comment">% 定义存放图片的位置</span></span><br><span class="line"><span class="tag">\<span class="name">graphicspath</span><span class="string">&#123;&#123;figure/&#125;</span></span>&#125;</span><br><span class="line"><span class="comment">% 模块式编程</span></span><br><span class="line"><span class="comment">% \newcommand&#123;\myfont&#125;&#123;\textit&#123;\textbf&#123;\textsf&#123;Fancy Family&#125;&#125;&#125;&#125;</span></span><br><span class="line"><span class="tag">\<span class="name">newcommand</span><span class="string">&#123;\myfont&#125;</span><span class="string">&#123;\textit&#123;\textbf&#123;\textrm&#123;Fancy Family&#125;</span></span>&#125;&#125;&#125;</span><br><span class="line"><span class="tag">\<span class="name">title</span><span class="string">&#123;杂谈爱情&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">author</span><span class="string">&#123;MYQ&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">date</span><span class="string">&#123;\today&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 正文区域</span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;document&#125;</span></span></span><br><span class="line">	<span class="tag">\<span class="name">maketitle</span></span></span><br><span class="line">	<span class="tag">\<span class="name">section</span><span class="string">&#123;开始&#125;</span></span></span><br><span class="line">	我们的故事始于北邮沙河的图书馆，虽然这不是我们相遇的地方，但却是我们相识、了解的地方</span><br><span class="line">	</span><br><span class="line">	这个故事的主人公是MYQ<span class="tag">\<span class="name">footnote</span><span class="string">&#123;MYQ,一名北京邮电大学小仙女，来自浙江绍兴&#125;</span></span>和YJZ<span class="tag">\<span class="name">footnote</span><span class="string">&#123;YJZ,一名北京邮电大学的傻子，来自河北石家庄&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	你告白的勇气也来源于一场美丽的误会（我来搞笑的）</span><br><span class="line">	<span class="tag">\<span class="name">begin</span><span class="string">&#123;center&#125;</span></span></span><br><span class="line">		——我以为那个在北邮微生活发消息的人是你<span class="tag">\<span class="name">\</span></span></span><br><span class="line">		——其实我根本就没有关注北邮微生活</span><br><span class="line">	<span class="tag">\<span class="name">end</span><span class="string">&#123;center&#125;</span></span></span><br><span class="line">	<span class="tag">\<span class="name">par</span></span> 误打误撞，我们就这样在一起了...对我来说，就像开启了一场新的生活，从没想过我也会有这样的一天，二十年来习惯了一个人生活的我，突然多了一个可以关心的人，也突然成为了住在别人心里的一个人<span class="tag">\<span class="name">ref</span><span class="string">&#123;fig:1&#125;</span></span><span class="tag">\<span class="name">\</span></span></span><br><span class="line"></span><br><span class="line">	<span class="tag">\<span class="name">par</span></span> 我曾写下这样三行情诗:</span><br><span class="line">	<span class="tag">\<span class="name">begin</span><span class="string">&#123;center&#125;</span></span></span><br><span class="line">		<span class="tag">\<span class="name">kaishu</span></span></span><br><span class="line">		土豆和马铃薯<span class="tag">\<span class="name">\</span></span></span><br><span class="line">		番茄和西红柿<span class="tag">\<span class="name">\</span></span></span><br><span class="line">		我喜欢的人和你<span class="tag">\<span class="name">\</span></span></span><br><span class="line">	<span class="tag">\<span class="name">end</span><span class="string">&#123;center&#125;</span></span></span><br><span class="line">	<span class="tag">\<span class="name">par</span></span> 今天我也想把它送给你</span><br><span class="line">	</span><br><span class="line">	<span class="tag">\<span class="name">pagebreak</span></span></span><br><span class="line">	<span class="tag">\<span class="name">section</span><span class="string">&#123;后来&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">\<span class="name">par</span></span> 在一起之后，我们一起做了很多很多的事情，完成了好多好多的第一次。第一次牵手，第一次拥抱，第一次约会，第一次旅行，第一次看演唱会...</span><br><span class="line">	<span class="tag">\<span class="name">par</span></span> 最棒的第一次是 第一次和你在一起</span><br><span class="line">	<span class="tag">\<span class="name">begin</span><span class="string">&#123;figure&#125;</span></span><span class="tag">\<span class="name">centering</span></span></span><br><span class="line">		<span class="tag">\<span class="name">includegraphics</span><span class="string">[scale=0.25]</span><span class="string">&#123;1.jpg&#125;</span></span></span><br><span class="line">		<span class="tag">\<span class="name">caption</span><span class="string">&#123;这之间还有一个大功臣——小辉（图片来源于小辉之手）&#125;</span></span></span><br><span class="line">		<span class="tag">\<span class="name">label</span><span class="string">&#123;fig:1&#125;</span></span></span><br><span class="line">	<span class="tag">\<span class="name">end</span><span class="string">&#123;figure&#125;</span></span></span><br><span class="line"></span><br><span class="line">	<span class="tag">\<span class="name">begin</span><span class="string">&#123;center&#125;</span></span></span><br><span class="line">		<span class="tag">\<span class="name">begin</span><span class="string">&#123;tabular&#125;</span><span class="string">&#123;|c|c|c|&#125;</span></span><span class="tag">\<span class="name">hline</span></span></span><br><span class="line">			<span class="tag">\<span class="name">small</span></span> 时间&amp;事件&amp;好感度<span class="tag">\<span class="name">\</span></span> <span class="tag">\<span class="name">hline</span></span></span><br><span class="line">			2019.1.24&amp;在一起&amp;100<span class="tag">\<span class="name">\</span></span><span class="tag">\<span class="name">hline</span></span></span><br><span class="line">			2019.2.14&amp;第一次过情人节&amp;120<span class="tag">\<span class="name">\</span></span><span class="tag">\<span class="name">hline</span></span></span><br><span class="line">			2019.5.4&amp;大傻过生日&amp;200<span class="tag">\<span class="name">\</span></span><span class="tag">\<span class="name">hline</span></span></span><br><span class="line">		<span class="tag">\<span class="name">end</span><span class="string">&#123;tabular&#125;</span></span></span><br><span class="line">	<span class="tag">\<span class="name">end</span><span class="string">&#123;center&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">\<span class="name">par</span></span>  这不仅仅是练习LaTeX的第一篇文章，更是写给你的一封<span class="tag">\<span class="name">emph</span><span class="string">&#123;小情书&#125;</span></span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">\<span class="name">pagebreak</span></span></span><br><span class="line">	<span class="tag">\<span class="name">begin</span><span class="string">&#123;thebibliography&#125;</span><span class="string">&#123;参考文献&#125;</span></span></span><br><span class="line">		<span class="tag">\<span class="name">bibitem</span><span class="string">&#123;MYQ&#125;</span></span> MYQ,著作《咱们俩》，北京邮电大学大三学生</span><br><span class="line">		<span class="tag">\<span class="name">bibitem</span><span class="string">&#123;YJZ&#125;</span></span> YJZ,著作《恋爱手册》，脑子里只有竞赛和大傻的三傻</span><br><span class="line">	<span class="tag">\<span class="name">end</span><span class="string">&#123;thebibliography&#125;</span></span></span><br><span class="line">	<span class="tag">\<span class="name">addcontentsline</span><span class="string">&#123;toc&#125;</span><span class="string">&#123;section&#125;</span><span class="string">&#123;参考文献&#125;</span></span></span><br><span class="line">	<span class="tag">\<span class="name">begin</span><span class="string">&#123;appendix&#125;</span></span></span><br><span class="line">		<span class="tag">\<span class="name">small</span></span> 今天是他们在一起的294天，大火花的第352天</span><br><span class="line">	<span class="tag">\<span class="name">end</span><span class="string">&#123;appendix&#125;</span></span></span><br><span class="line">	</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;document&#125;</span></span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://woojoo520.github.io/2019/11/13/QQ通信原理分析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mariana">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Celery Fairy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/13/QQ通信原理分析/" itemprop="url">QQ通信原理Fenix</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-13T16:15:45+08:00">
                2019-11-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="起源"><a href="#起源" class="headerlink" title="起源"></a>起源</h4><p>为什么今天会些这样一片文章呢…</p>
<p>因为在做程序设计大作业的时候突然发现不知道怎么实现QQ聊天</p>
<p>在之前的C++大作业当中，我实现通信的方法是利用ip地址（当时好像写的是确定的ip地址），但是想到这个软件应该是在不同的地方都能够运行的，所以，用什么来表示用户，然后怎么实现通信呢？</p>
<p>所以搜索了相应的资料之后得到以下几个问题的回答：</p>
<p>参考：<a href="https://blog.csdn.net/li_xiao_ming/article/details/8106857" target="_blank" rel="noopener">https://blog.csdn.net/li_xiao_ming/article/details/8106857</a></p>
<h5 id="1-为什么只要连上互联网的计算机都可以用QQ互相建立通信，需不需要固定ip？"><a href="#1-为什么只要连上互联网的计算机都可以用QQ互相建立通信，需不需要固定ip？" class="headerlink" title="1. 为什么只要连上互联网的计算机都可以用QQ互相建立通信，需不需要固定ip？"></a>1. 为什么只要连上互联网的计算机都可以用QQ互相建立通信，需不需要固定ip？</h5><p>也就是说这个QQ用户端是怎样找到另一个QQ用户的，而用户在每次使用时他可能用的是不同的计算机，有着不同的IP地址。</p>
<p>服务器端会以QQ账号作为唯一表示，一个账号登录时每次都可以有不同的IP地址，但账号却相同，当账号a登录服务器，服务器会记录下账号a的ip地址，去通知a的好友，告诉他们，a上线了和现在的ip地址，a的好友就可以和他们进行通信了</p>
<h5 id="2-是不是QQ在通信时根本不适用IP，QQ客户端先是访问QQ服务器端，然后QQ服务器端再为要建立连接的QQ客户端建立连接？"><a href="#2-是不是QQ在通信时根本不适用IP，QQ客户端先是访问QQ服务器端，然后QQ服务器端再为要建立连接的QQ客户端建立连接？" class="headerlink" title="2. 是不是QQ在通信时根本不适用IP，QQ客户端先是访问QQ服务器端，然后QQ服务器端再为要建立连接的QQ客户端建立连接？"></a>2. 是不是QQ在通信时根本不适用IP，QQ客户端先是访问QQ服务器端，然后QQ服务器端再为要建立连接的QQ客户端建立连接？</h5><p>只要是网络层的通信，都会涉及到ip/tcp协议，就肯定需要ip，qq客户端登陆qq服务器，服务器只是记录登陆状态，不会一直和qq保持通信，只会每隔一段时间发送心跳数据包，来确实qq客户端是否还在网络上。当qq客户端a上线后，服务器会告诉a，目前a的在线好友的最新ip地址，当a需要与任意好友通信时，直接使用ip地址就ok了。qq客户端a与qq客户端b通信，可以两种方式，第一就是qq服务器有转发的服务器，第二是，a与b直接通信，不会告诉qq服务器</p>
<h5 id="3-QQ客户端可以访问QQ服务器端，然后服务器端获取QQ客户端的IP建立通信，是不是这样的过程…如果是，这个过程是怎么处理的呢？"><a href="#3-QQ客户端可以访问QQ服务器端，然后服务器端获取QQ客户端的IP建立通信，是不是这样的过程…如果是，这个过程是怎么处理的呢？" class="headerlink" title="3. QQ客户端可以访问QQ服务器端，然后服务器端获取QQ客户端的IP建立通信，是不是这样的过程…如果是，这个过程是怎么处理的呢？"></a>3. QQ客户端可以访问QQ服务器端，然后服务器端获取QQ客户端的IP建立通信，是不是这样的过程…如果是，这个过程是怎么处理的呢？</h5><p>是这样的过程，qq客户端请求一个连接给服务器，服务器接收后，知道qq端a上线，把qq端a的账号跟目前的ip会记录下来，放在在线列表里或者其他的地方，然后每隔几分钟或者几秒钟给qq端a发送心跳包，问他是否还在线，来确保qq端a的最新状态。这里客户端与服务器的通信方式是udp。而不会时时刻刻都在用tcp连接。</p>
<h5 id="4-QQ客户端虽然IP地址不固定，但是在建立与QQ服务器端的通信时，必须提供自己的IP被服务器获取，然后才能建立他们之间的通信，进而在建立客户端之间的通信。也就是，只要能上网就有IP，只不过客户端的IP，是被QQ客户端获取了，然后才建立通信的。（这是自己的猜测，不知对否…）"><a href="#4-QQ客户端虽然IP地址不固定，但是在建立与QQ服务器端的通信时，必须提供自己的IP被服务器获取，然后才能建立他们之间的通信，进而在建立客户端之间的通信。也就是，只要能上网就有IP，只不过客户端的IP，是被QQ客户端获取了，然后才建立通信的。（这是自己的猜测，不知对否…）" class="headerlink" title="4. QQ客户端虽然IP地址不固定，但是在建立与QQ服务器端的通信时，必须提供自己的IP被服务器获取，然后才能建立他们之间的通信，进而在建立客户端之间的通信。也就是，只要能上网就有IP，只不过客户端的IP，是被QQ客户端获取了，然后才建立通信的。（这是自己的猜测，不知对否…）"></a>4. QQ客户端虽然IP地址不固定，但是在建立与QQ服务器端的通信时，必须提供自己的IP被服务器获取，然后才能建立他们之间的通信，进而在建立客户端之间的通信。也就是，只要能上网就有IP，只不过客户端的IP，是被QQ客户端获取了，然后才建立通信的。（这是自己的猜测，不知对否…）</h5><p>服务器不会以ip作为唯一标识，会以账号作为唯一标识，但与账号通信的时候会用到账号目前所对应的ip，客户端与客户端通信也如此</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Mariana</p>
              <p class="site-description motion-element" itemprop="description">a study blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">122</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mariana</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
